<!doctype html>
<html>
<head>
	<title>VoxelJS</title>
	<script type='text/javascript' src='jquery.js'></script>
	<script type='text/javascript' src='voxel.js'></script>
	<script type='text/javascript'>
		$(function() {
			/* create map */

			var map = voxel().map([20,20,5]);
			
			for(var z = 0; z < 5; ++z) {
				for(var x = 0; x < 20; ++x) {
					for(var y = 0; y < 20; ++y) {
						if(z < 1) {
							map.set([x,y,z], 'tile');
						} else if(x*y < z) {
							map.set([x,y,z], 'tile');
							
						}
					}
				}
			}

			/* render map */
			var cx = $('#map').width() / 2;
			var cy = $('#map').height() / 2;
			
			var html = '';
			var cursor;
			var tile;

			var start = (new Date).getTime();


			for(var z = 0; z < 5; ++z) {
				for(var x = 0; x < 20; ++x) {
					for(var y = 0; y < 20; ++y) {
						tile = map.get([x,y,z]);
						
						if(tile === undefined) {
							continue;
						}

						var vx, vy;
						vx = (x - y) * 16;
						vy = ((x/2) + (y/2)) * 18 - z * 8;

						html += '<div title=\'' + x + ', ' + y + ', ' + z + 
								'\' class=\'tile\' style=\'top:' + (cy + vy) + 
								'px;left:' + (cx + vx) + 'px;\'></div>';
					}
				}
			}
				
			$('#map').html(html).ready(function() {
				console.log(((new Date).getTime() - start) + 'ms');
			});

		});
	</script>
	<style type='text/css'>
		body {
			background: #474747;
		}

		#map {
			background: #474747;
			height: 700px;
			left: 0px;
			position: relative;
			top: 0px;
			width: 100%;
			z-index: 1;
		}

		.tile {
			background-image: url('tile.png');
			height: 28px;
			position: absolute;
			width: 32px;
			z-index: 2;
		}

		.tile:hover {
			opacity: 0.6;
		}
	</style>
</head>
<body>
	<div id='map'>
	</div>
</body>
</html>
